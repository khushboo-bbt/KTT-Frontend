<section id="hero">
  <!-- Carousel Section -->
  <app-carousel></app-carousel>

  <div class="form-container">
    <!-- Flight Type Tabs -->
    <app-flight-type-tabs [activeTab]="activeTab" [toggleOneWayTrip]="toggleOneWayTrip" [toggleRoundTrip]="toggleRoundTrip" [toggleMultiCity]="toggleMultiCity">
    </app-flight-type-tabs>

    <div class="card">
      <div class="card-body col-lg-12">
        <!-- One Way Form -->
        <ng-container *ngIf="oneWayForm">
          <app-common-flight-fields 
            [formGroup]="oneWayFormData" 
            [showReturn]="false" 
            [today]="today"
            [minToDate]="minToDate" 
            [listOfAirports]="listOfAirports" 
            [searchInput$]="searchInput$"
            [adultOptions]="passengerOptions.adult.options"
            [childOptions]="passengerOptions.child.options"
            [infantOptions]="passengerOptions.infant.options"
            (swapAirports)="swapSelection()" 
            (airportSelect)="selectAirport($event.event, $event.field)"
            (submit)="submitOneWayFormData()">
          </app-common-flight-fields>
        </ng-container>

        <!-- Round Trip Form -->
        <ng-container *ngIf="roundTripForm">
          <app-common-flight-fields 
            [formGroup]="roundTripFormData" 
            [showReturn]="true"
            [today]="today" 
            [minToDate]="minToDate" 
            [listOfAirports]="listOfAirports" 
            [searchInput$]="searchInput$"
            [adultOptions]="passengerOptions.adult.options"
            [childOptions]="passengerOptions.child.options"
            [infantOptions]="passengerOptions.infant.options"
            (swapAirports)="swapSelection()" 
            (submit)="submitRoundTripFormData()">
          </app-common-flight-fields>
        </ng-container>

        <!-- Multi City Form -->
        <ng-container *ngIf="multiCityForm">
          <form [formGroup]="multiCityFormData" (ngSubmit)="submitMultiCityFormData()">
            <!-- The multi-city component handles dynamic flight legs -->
            <app-multi-city-fields 
              [formGroup]="multiCityFormData"
              [listOfAirports]="listOfAirports"
              [searchInput$]="searchInput$"
              [adultOptions]="passengerOptions.adult.options"
              [childOptions]="passengerOptions.child.options"
              [infantOptions]="passengerOptions.infant.options"
              (airportSelect)="selectAirport2($event, $event.field)"
              (swapAirports)="swapSelection()"
              (submit)="submitMultiCityFormData()">
            </app-multi-city-fields>

            <button type="submit" class="btn btn-continue">
              <img src="../../../assets/icons/search.svg" alt="Search Icon" class="me-1" />
              Search Flights
            </button>
          </form>
        </ng-container>
      </div>
    </div>
  </div>
</section>
